{% extends "main/layout.html" %}

{% block title %}
Форма по добавлению
{% endblock %} 

{% block content %}
    <div id='file' align='left'>
        <h2>Загруженные документы:</h2>
        <div class = 'bordered-file'>
            <ul>
                {% for document in active_docs %}
                    <li>
                        <p href="{{ document.file.url }}"> Название: {{ document.title }} Загружен: {{ document.uploaded_at }} Статус: {{ document.status }}</p>
                        <a href="{% url 'download_document' document.id %}">Скачать документ</a>
                        {% if request.user.is_staff or request.user.moderator%}
                            <form method="post" action="{% url 'update_status' document.id %}">
                                {% csrf_token %}
                                <select name="status">
                                    <option value="accepted" {% if document.status == 'accepted' %}selected{% endif %}>утвердить</option>
                                    <option value="rejected" {% if document.status == 'rejected' %}selected{% endif %}>Отклонить</option>
                                </select>
                                <button type="submit">Обновить статус</button>
                            </form>
                            <form method="post" action="{% url 'delete_document' document.id %}">
                                {% csrf_token %}
                                <button type="submit">Удалить файл</button>
                            </form>
                            <form method="post" action="{% url 'archive' document.id %}">
                                {% csrf_token %}
                                <button type="submit">В архив</button>
                            </form>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>
        <h2>Архивные документы:</h2>
        <div class = 'bordered-file'>
            <ul>
                {% for doc in archived_docs %}
                <li>
                    <p href="{{ document.file.url }}"> Название: {{ doc.title }} архивирован: {{ doc.archived_at|date:"d.m.Y" }}</p>
                    <button type="submit"><a href="{% url 'download_document' doc.id %}">Скачать</a></button>
                    {% if request.user.is_staff or request.user.moderator%}
                        <button type="submit"><a href="{% url 'restore' doc.id %}">Восстановить</a></button>
                        <button type="submit"><a href="{% url 'delete_document' doc.id %}">Удалить</a></button>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
{% endblock %}
<style>
    ul {
      font-size: 24px;
    }
  </style>